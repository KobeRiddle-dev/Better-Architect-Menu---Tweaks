<?xml version="1.0" encoding="utf-8"?>
<Patch>

    <!-- Move everything in the subcategories to Power -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[designationCategory="Ferny_PowerGeneration"
            or designationCategory="Ferny_PowerStorage"
            or designationCategory="Ferny_PowerManagement"]/designationCategory</xpath>
        <value>
            <designationCategory>Power</designationCategory>
        </value>
    </Operation>

    <!-- Remove Subcategories -->
    <Operation Class="PatchOperationRemove">
        <xpath>Defs/DesignationCategoryDef[modExtensions/li[@Class="BetterArchitect.NestedCategoryExtension"]/parentCategory[text()="Power"]]</xpath>
    </Operation>

    <!-- Move Power Category -->
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/DesignationCategoryDef[defName="Power"]</xpath>
        <value>
            <modExtensions>
                <li Class="BetterArchitect.NestedCategoryExtension">
                    <parentCategory>VCHE_PipeNetworks</parentCategory>
                </li>
            </modExtensions>
        </value>
    </Operation>

</Patch>